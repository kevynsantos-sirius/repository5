<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<title>PADD - Meus Documentos</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

<link rel="stylesheet" th:href="@{/css/identificacao.css}" />
<link rel="stylesheet" th:href="@{/css/ti.css}" />
<link rel="stylesheet" href="/css/style.css" />

<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

</head>

<body>
<div class="main-wrapper">	
    <!-- SIDEBAR -->
    <aside class="sidebar">
        <div class="sidebar-header d-flex align-items-center mb-4">
    		<a th:href="@{/}" class="text-decoration-none">
        		<h5 class="logo mb-0">PADD</h5>
    		</a>
		</div>

        <!-- BOT√ÉO NOVO DOCUMENTO -->
        <button id="btnNovo" class="btn btn-novo active" onclick="NovoDocumento()">Novo documento</button>
        
        <!-- SUBMENU DAS ABAS -->
        <div id="submenu" class="submenu mt-3" style="display: none;">
            <button class="btn-submenu" onclick="mostrarAba('aba-identificacao')">Identifica√ß√£o do Documento</button>
            <button class="btn-submenu" onclick="mostrarAba('aba-ti')">TI</button>
            <button class="btn-submenu" onclick="mostrarAba('aba-modelo')">Modelo</button>
        </div>
	
		<!-- Rodap√© fixo com usu√°rio + sair -->
		<div class="sidebar-user-footer d-flex align-items-center gap-2">
		
		    <!-- Avatar com inicial -->
		    <div class="avatar-circle">
		        <span th:text="${#strings.substring(usuarioLogado.nome, 0, 1)}"></span>
		    </div>
		
		    <div class="flex-grow-1">
		        <!-- Nome do usu√°rio -->
		        <span class="nome-usuario"
		              th:text="${usuarioLogado.nome}">
		            Usu√°rio
		        </span>
		
		        <!-- Bot√£o sair -->
		        <form th:action="@{/logout}" method="post" class="mt-1">
		            <button class="btn btn-sm btn-logout w-100 text-start">
		                Sair
		            </button>
		        </form>
		    </div>
		
		</div>
    </aside>

    <!-- CONTE√öDO PRINCIPAL -->
    <main class="content-area">

        <!-- ABA: HOME (padr√£o) -->
        <div id="aba-home" class="aba" style="display:block;">
			<!-- üîπ Painel lateral de vers√µes -->
<div id="painel-versoes" class="painel-versoes" style="display:none">

    <div class="painel-header">
        <span>üìú Vers√µes</span>
    </div>

    <ul id="listaVersoesLateral" class="lista-versoes" >
        <!-- preenchido via JS -->
    </ul>

</div>
			
            <div class="card documentos-card">
                <div class="card-header d-flex justify-content-between align-items-center bg-white border-0 pb-0">
                    <h5 class="mb-0">Meus documentos</h5>
                    <button class="btn btn-recarregar" onclick="location.reload()">Recarregar</button>
              
                </div>

                <div class="card-body pt-3">
                    <div th:replace="fragment/checklists :: tabelaChecklist(${checklists})"></div>

                    <div class="footer-btns mt-4">
                        <button class="btn btn-status">Em revis√£o</button>
                        <button class="btn btn-status">Aprovado</button>
                        <button class="btn btn-status">Publicado</button>
                    </div>
                </div>

            </div>
        </div>

        <!-- ABA: IDENTIFICA√á√ÉO -->
        <div id="aba-identificacao" class="aba" style="display:none;">
            <div th:replace="~{fragment/identificacao :: identificacao}"></div>
        </div>

        <!-- ABA: TI -->
        <div id="aba-ti" class="aba" style="display:none;">
            <div th:replace="~{fragment/ti :: ti}"></div>
        </div>
        
        <!-- ABA: Modelo -->
        <div id="aba-modelo" class="aba" style="display:none;">
            <div th:replace="~{fragment/modelo :: modelo}"></div>
        </div>
        
        <div id="acoesChecklist" class="d-flex justify-content-end gap-2 mt-2">
		    <!-- Cancelar -->
		    <button id="btnCancelar"
		            type="button"
		            class="btn-acoes btn-cancelar d-none"
		            onclick="cancelarCriacaoChecklist()">
		        Cancelar
		    </button>
		
		    <!-- Salvar -->
		    <button id="btnSalvar"
			        type="button"
			        class="btn-acoes btn-salvar d-none">
			    Salvar Documento
			</button>
		</div>
    </main>
</div>

<script>
    window.USUARIO_LOGADO_ID   = '[[${usuarioLogado.id}]]';
    window.USUARIO_LOGADO_NOME = '[[${usuarioLogado.nome}]]';
</script>


<script th:inline="javascript">
    window.API_BASE_URL = /*[[${apiUrl}]]*/ "";
</script>


<script src="/js/identificacao.js"></script>
<script src="/js/ti.js"></script>
<script src="/js/app.js"></script>

</body>
</html>
